<nav class="navbar {{showBurgerMenu ? 'open' : ''}}" >
  <div class="container-fluid">
    <span class="navbar-brand {{showBurgerMenu ? 'menu-open' : ''}}" (click)="redirectHome()">
      <a routerLink="/">
        <h1>
          <span>be</span>
          <span>watched</span>
        </h1>
      <div>
        <small>La passion du vintage</small>
      </div>
      </a>
    </span>
    <div class="navbar-text nav-wrap d-flex justify-content-center align-items-center icons">
      <div class="searching">
        <span class="navbar-text search  {{searchString !== '' ? 'border-search' : ''}}" (click)="toggleSearchMobile()">
          <div class="input">
            <input type="text" [value]="searchString" (keyup)="search($event)" placeholder="Recherchez une montre, un modèle..." class="form-control {{showBurgerMenu ? 'menu-open' : ''}}">
            <span *ngIf="searchString !== ''" class="delete-search" (click)="deleteSearch()">X</span>
            <svg xmlns="http://www.w3.org/2000/svg" fill="#ffffff" width="22" height="19" viewBox="0 0 212.955 209">
              <g id="Calque_2" data-name="Calque 2">
                <g id="Calque_1-2" data-name="Calque 1">
                  <path d="M143.455,0a69.4935,69.4935,0,0,0-57.35,108.75L2.925,191.93a9.9985,9.9985,0,1,0,14.14,14.14l82.6-82.6A69.50021,69.50021,0,1,0,143.455,0Zm0,128a58.36161,58.36161,0,0,1-35.97-12.35,59.08279,59.08279,0,0,1-7.34-6.8A58.51543,58.51543,0,1,1,143.455,128Z"/>
                </g>
              </g>
            </svg>
          </div>
        </span>
        <div class="search-result desktop {{searchString !== '' ? 'd-flex' : 'd-none'}}">
          <ul *ngIf="searchString !== ''">
            <ng-container *ngFor="let montre of searchResult">
              <li class="search-item" (click)="redirectMontreDetailFromSearch(montre.id)">{{montre.brand.name}} - {{montre.model}}</li>
            </ng-container>
          </ul>
        </div>
      </div>
      <span class="navbar-text panier position-relative {{panierIsOpen ? 'open' : ''}} {{showBurgerMenu ? 'menu-open' : ''}}"
            (onHidden)="onHidden()" [outsideClick]="true" (click)="openPanier(pop)" [popover]="popTemplate" placement="bottom right" triggers="" #pop="bs-popover">
      <span class="position-absolute top-0 start-100 translate-middle {{showBurgerMenu ? 'menu-open' : ''}} badge rounded-pill bg-danger">{{badgePanier}}
  </span>
      <svg xmlns="http://www.w3.org/2000/svg" fill="#ffffff" width="30" height="20" viewBox="0 0 205 195.48004">
          <g id="Calque_1-2" data-name="Calque 1">
            <path d="M172.30005,35.48H151.07a50.98471,50.98471,0,0,0-97.14,0H32.7a32.73809,32.73809,0,0,0-32.7,32.7v94.6a32.73813,32.73813,0,0,0,32.7,32.7h139.6a32.73808,32.73808,0,0,0,32.7-32.7v-94.6A32.738,32.738,0,0,0,172.30005,35.48ZM102.5,10.96a40.08571,40.08571,0,0,1,36.9,24.52H65.6A40.08571,40.08571,0,0,1,102.5,10.96ZM195,162.78a22.72157,22.72157,0,0,1-22.69995,22.7H32.7A22.72162,22.72162,0,0,1,10,162.78v-94.6a22.72162,22.72162,0,0,1,22.7-22.7h139.6a22.72157,22.72157,0,0,1,22.7,22.7Z"/>
          </g>
      </svg>
    </span>
      <span (click)="toggleBurgerMenu()" class="navbar-text burger mobile {{showBurgerMenu ? 'open' : 'close'}}">
        <svg *ngIf="!showBurgerMenu" xmlns="http://www.w3.org/2000/svg" width="40" height="50" viewBox="0 0 477.55501 199.50786">
        <defs>
          <style>
            .cls-2{fill:none;stroke:#ffffff !important;stroke-linecap:round;stroke-linejoin:round;stroke-width:10px;}
          </style>
        </defs>
          <g id="Calque_1-2" data-name="Calque 1">
            <line class="cls-2" x1="9.0275" y1="9.0275" x2="339.43418" y2="9.0275"/>
            <line class="cls-2" x1="9.93026" y1="190.48035" x2="340.33694" y2="190.48035"/>
            <line class="cls-2" x1="64.99804" y1="99.30255" x2="468.5275" y2="99.30255"/>
          </g>
      </svg>
        <svg *ngIf="showBurgerMenu" xmlns="http://www.w3.org/2000/svg" width="30" height="25" fill="#ffffff" viewBox="0 0 192.53637 200.16239">
          <defs><style>.cls-1{fill:none;stroke:#ffffff;stroke-linecap:round;stroke-linejoin:round;stroke-width:10.34239px;}</style></defs><g id="Calque_2" data-name="Calque 2"><g id="Calque_1-2" data-name="Calque 1"><path class="cls-1" d="M29.17119,29.17119l67.097,70.91,67.097,70.91m-134.194,0,67.097-70.91,67.097-70.91"/></g></g></svg>
      </span>
    </div>
    <div class="navbar-text nav-wrap d-flex desktop">
      <div (click)="toggleBurgerMenu()" class="navbar-text burger {{showBurgerMenu ? 'open' : 'close'}}">
        <img *ngIf="!showBurgerMenu" src="assets/menu-burger-desktop.png" alt="" class="desktop-burger">
        <svg *ngIf="showBurgerMenu" xmlns="http://www.w3.org/2000/svg" width="30" height="25" fill="#ffffff" viewBox="0 0 192.53637 200.16239">
          <defs><style>.cls-1{fill:none;stroke:#ffffff;stroke-linecap:round;stroke-linejoin:round;stroke-width:10.34239px;}</style></defs><g id="Calque_2" data-name="Calque 2"><g id="Calque_1-2" data-name="Calque 1"><path class="cls-1" d="M29.17119,29.17119l67.097,70.91,67.097,70.91m-134.194,0,67.097-70.91,67.097-70.91"/></g></g></svg>

      </div>
      <ul *ngIf="showBurgerMenu" class="desktop-menu">
        <li><a routerLink="" (click)="toggleBurgerMenu()">Accueil</a></li>
        <li><a routerLink="shop" (click)="toggleBurgerMenu()">La<br>boutique</a></li>
        <li><a routerLink="our-story" (click)="toggleBurgerMenu()">Notre<br>histoire</a></li>
        <li><a routerLink="contact" (click)="toggleBurgerMenu()">Contact</a></li>
      </ul>
    </div>

  </div>
</nav>

<div class="burger-collapse {{showBurgerMenu ? 'active' : ''}}">
  <div class="border"></div>
  <ul>
    <li><a routerLink="" (click)="toggleBurgerMenu()">Accueil</a></li>
    <li><a routerLink="shop" (click)="toggleBurgerMenu()">La<br>boutique</a></li>
    <li><a routerLink="our-story" (click)="toggleBurgerMenu()">Notre<br>histoire</a></li>
    <li><a routerLink="contact" (click)="toggleBurgerMenu()">Contact</a></li>
  </ul>
  <div class="border"></div>
</div>

<ng-template #popTemplate>
  <ng-container *ngIf="badgePanier === 0 then casVide else casItems"></ng-container>
  <ng-template #casVide>
    <span class="empty-shop">Votre panier est actuellement vide.</span>
  </ng-template>
  <ng-template #casItems>
    <span class="shop-title">Votre panier</span>
    <ng-container *ngFor="let montre of panier">
      <a routerLink="/detail/{{montre.id}}" class="shop-link-watch">
        <app-montre-item-panier [montre]="montre"></app-montre-item-panier>
      </a>
    </ng-container>
    <div class="d-flex align-items-center justify-content-center">
      <button (click)="goToRecapPanier()" type="button" class="btn btn-valider-panier">Aller au panier</button>
    </div>
  </ng-template>
</ng-template>



<div class="mobile-search-bar flex-column align-items-start justify-content-start" *ngIf="toggleMobileSearch">
  <svg (click)="toggleSearchMobile()" xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="currentColor" class="bi bi-x-circle-fill" viewBox="0 0 16 16">
    <path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM5.354 4.646a.5.5 0 1 0-.708.708L7.293 8l-2.647 2.646a.5.5 0 0 0 .708.708L8 8.707l2.646 2.647a.5.5 0 0 0 .708-.708L8.707 8l2.647-2.646a.5.5 0 0 0-.708-.708L8 7.293 5.354 4.646z"/>
  </svg>
  <div class="d-flex wrap">
    <input type="text" [value]="searchString" (keyup)="search($event)" placeholder="Recherchez une montre, un modèle..." class="form-control {{showBurgerMenu ? 'menu-open' : ''}}">
  </div>
  <div class="search-result mobile {{searchString !== '' ? 'd-flex' : 'd-none'}}">
    <ul *ngIf="searchString !== ''">
      <ng-container *ngFor="let montre of searchResult">
        <li class="search-item" (click)="redirectMontreDetailFromSearch(montre.id)">{{montre.brand.name}} - {{montre.model}}</li>
      </ng-container>
    </ul>
  </div>
</div>
